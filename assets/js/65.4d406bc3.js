(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{442:function(a,e,t){"use strict";t.r(e);var s=t(38),n=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[a._v("#")]),a._v(" Installation")]),a._v(" "),t("p",[a._v("You can install Twill on an existing Laravel application or a new one.")]),a._v(" "),t("h2",{attrs:{id:"composer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#composer"}},[a._v("#")]),a._v(" Composer")]),a._v(" "),t("p",[a._v("Twill package can be added to your application using Composer:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("composer")]),a._v(" require area17/twill:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^2.0"')]),a._v("\n")])])]),t("h2",{attrs:{id:"artisan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#artisan"}},[a._v("#")]),a._v(" Artisan")]),a._v(" "),t("p",[a._v("Run the "),t("code",[a._v("twill:install")]),a._v(" Artisan command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("php artisan twill:install\n")])])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),t("p",[a._v("This command will migrate your database.")]),a._v(" "),t("p",[a._v("Make sure to setup your .env file with your database credentials and to run it where your database is accessible (ie. inside Vagrant if you are using Laravel Homestead).")])]),a._v(" "),t("p",[a._v("Twill's "),t("code",[a._v("install")]),a._v(" command consists of:")]),a._v(" "),t("ul",[t("li",[a._v("creating an "),t("code",[a._v("admin.php")]),a._v(" routes files in your application's "),t("code",[a._v("routes")]),a._v(" directory. This is where you will declare your own admin console routes.")]),a._v(" "),t("li",[a._v("migrating your database with Twill's migrations.")]),a._v(" "),t("li",[a._v("publishing Twill's configuration files to your application's "),t("code",[a._v("config")]),a._v(" directory.")]),a._v(" "),t("li",[a._v("publishing Twill's assets for the admin console UI.")]),a._v(" "),t("li",[a._v("prompting you to create a superadmin user.")])]),a._v(" "),t("h2",{attrs:{id:"env"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[a._v("#")]),a._v(" .env")]),a._v(" "),t("p",[a._v("By default, Twill's admin console is available at "),t("code",[a._v("admin.domain.test")]),a._v(". This is assuming that your .env "),t("code",[a._v("APP_URL")]),a._v(" variable does not include a scheme ("),t("code",[a._v("http")]),a._v("/"),t("code",[a._v("https")]),a._v("):")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("APP_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("domain.test\n")])])]),t("p",[a._v("In development, make sure that the "),t("code",[a._v("admin")]),a._v(" subdomain is available and pointing to your app's "),t("code",[a._v("public")]),a._v(" directory.")]),a._v(" "),t("p",[a._v("If you are a Valet user, this is already done for you (any subdomain is linked to the same directory as the linked domain).")]),a._v(" "),t("p",[a._v("If you are a Homestead user, make sure to add the subdomain to your "),t("code",[a._v("/etc/hosts")]),a._v(" file too:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# this is an example, use your own IP and domain")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".10.10 domain.test\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".10.10 admin.domain.test\n")])])]),t("p",[a._v("Optionally, you can specify a custom admin console url using the "),t("code",[a._v("ADMIN_APP_URL")]),a._v(" variable. For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADMIN_APP_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("manage.domain.test\n")])])]),t("p",[a._v("As well as a path using the "),t("code",[a._v("ADMIN_APP_PATH")]),a._v(" variable. For example, to have the admin console available on a subdirectory of your app ("),t("code",[a._v("domain.test/admin")]),a._v("):")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("APP_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("domain.test\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADMIN_APP_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("domain.test\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADMIN_APP_PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin\n")])])]),t("p",[a._v("When running on 2 different subdomains (which is the default configuration as seen above), you  want to share cookies between both domains so that publishers can access drafts on the frontend. Use the "),t("code",[a._v("SESSION_DOMAIN")]),a._v(" variable with your domain, prefixed by a dot, like in the following example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SESSION_DOMAIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(".domain.test\n")])])]),t("h2",{attrs:{id:"accessing-the-admin-console"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accessing-the-admin-console"}},[a._v("#")]),a._v(" Accessing the admin console")]),a._v(" "),t("p",[a._v("At this point, you should be able to login at "),t("code",[a._v("admin.domain.test")]),a._v(", "),t("code",[a._v("manage.domain.test")]),a._v(" or "),t("code",[a._v("domain.test/admin")]),a._v(" depending on your environment configuration. You should be presented with a dashboard with an empty activities list, a link to open Twill's media library and a dropdown to manage users, your own account and logout.")]),a._v(" "),t("h2",{attrs:{id:"setting-up-the-media-library"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-media-library"}},[a._v("#")]),a._v(" Setting up the media library")]),a._v(" "),t("p",[a._v("From there, you might want to configure Twill's media library's storage provider and its rendering service. By default, Twill is configured to store uploads on "),t("code",[a._v("AWS S3")]),a._v(" and to render images via "),t("a",{attrs:{href:"https://imgix.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("Imgix"),t("OutboundLink")],1),a._v(". Provide the following .env variables to get up and running:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("S3_KEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("S3_KEY\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("S3_SECRET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("S3_SECRET\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("S3_BUCKET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bucket-name\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMGIX_SOURCE_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("source.imgix.net\n")])])]),t("p",[a._v("If you are not ready to use those third party services yet, can't use them, or have very limited image rendering needs, Twill also provides a local storage driver as well as a locale image rendering service powered by "),t("a",{attrs:{href:"https://glide.thephpleague.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Glide"),t("OutboundLink")],1),a._v(". The following .env variables should get you up and running:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MEDIA_LIBRARY_ENDPOINT_TYPE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("local\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MEDIA_LIBRARY_IMAGE_SERVICE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("A17"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Twill"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Services"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("MediaLibrary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Glide\n")])])]),t("p",[a._v("See the "),t("RouterLink",{attrs:{to:"/media-library/"}},[a._v("media library's configuration documentation")]),a._v(" for more information.")],1),a._v(" "),t("h2",{attrs:{id:"a-note-about-the-frontend"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-note-about-the-frontend"}},[a._v("#")]),a._v(" A note about the frontend")]),a._v(" "),t("p",[a._v("On your frontend domain ("),t("code",[a._v("domain.test")]),a._v("), nothing changed, and that's ok! Twill does not make any assumptions regarding how you might want to build your own applications. It is up to you to setup Laravel routes that queries content created through Twill's admin console. You can decide to use server side rendering with Laravel's Blade templating and/or to define API endpoints to build your frontend application using any client side solution (eg. Vue, React, Angular, ...).")]),a._v(" "),t("p",[a._v("On a clean Laravel install, you should still see Laravel's welcome screen. If you installed Twill on an existing Laravel application, your setup should not be affected. Do not hesitate to reach out on "),t("a",{attrs:{href:"https://github.com/area17/twill/issues",target:"_blank",rel:"noopener noreferrer"}},[a._v("GitHub"),t("OutboundLink")],1),a._v(" if you have a specific use case or any trouble using Twill with your existing application.")])])}),[],!1,null,null,null);e.default=n.exports}}]);