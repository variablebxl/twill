(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{401:function(t,e,s){"use strict";s.r(e);var o=s(38),a=Object(o.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"development-workflow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#development-workflow"}},[t._v("#")]),t._v(" Development Workflow")]),t._v(" "),s("p",[t._v("As of verison 2.2, it is not necessary to rebuild Twill's frontend when working with blocks anymore. Their templates are now dynamically rendered in Blade and loaded at runtime by Vue. (For <2.1.x users, it means you do not need to run "),s("code",[t._v("php artisan twill:blocks")]),t._v(" and "),s("code",[t._v("npm run twill-build")]),t._v(" after creating or updating a block. Just reload the page to see your changes after saving your Blade file!)")]),t._v(" "),s("p",[t._v("This is possible because Twill's blocks Vue components are simple single file components that only have a template and a mixin registration. Blocks components are now dynamically registered by Vue using "),s("code",[t._v("x-template")]),t._v(" scripts that are inlined by Blade.")]),t._v(" "),s("h4",{attrs:{id:"custom-blocks-and-repeaters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-blocks-and-repeaters"}},[t._v("#")]),t._v(" Custom blocks and repeaters")]),t._v(" "),s("p",[t._v("To define a block as being "),s("code",[t._v("compiled")]),t._v(" (ie. using a custom Vue component), you can do this with the annotations "),s("code",[t._v("@twillPropCompiled('true')")]),t._v(", "),s("code",[t._v("@twillBlockCompiled('true')")]),t._v(" or "),s("code",[t._v("@twillRepeaterCompiled('true')")]),t._v(". The imported Vue file will be prefered at runtime over the inline, template only, version.")]),t._v(" "),s("p",[t._v("You can bootstrap your custom Vue blocks by generating them from their Blade counterpart using "),s("code",[t._v("php artisan twill:blocks")]),t._v(". It will ask you to confirm before overriding any existing custom Vue block. To start a custom Vue block from scratch, use the following template:")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- eslint-disable --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("block__body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- CUSTOM CODE --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BlockMixin "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/mixins/block'")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mixins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("BlockMixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])])]),s("p",[t._v("Note: For legacy 2.1.x users, in the "),s("code",[t._v("twill.block_editor.blocks")]),t._v(" configuration array, set 'compiled' to "),s("code",[t._v("true")]),t._v(" on the individual blocks.")]),t._v(" "),s("p",[t._v("If you are using custom Vue blocks (as in, you edited the "),s("code",[t._v("template")]),t._v(", "),s("code",[t._v("script")]),t._v(" or "),s("code",[t._v("style")]),t._v(" section of a generated block Vue file), you need to rebuild Twill assets.")]),t._v(" "),s("p",[t._v("There are two artisan commands to help you and we recommend using them instead of our previous versions' npm scripts:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("php artisan twill:build")]),t._v(", which will build Twill's assets with your custom blocks, located in the "),s("code",[t._v("twill.block_editor.custom_vue_blocks_resource_path")]),t._v(" new configurable path (with defaults to "),s("code",[t._v("assets/js/blocks")]),t._v(", like in previous versions).")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("php artisan twill:dev")]),t._v(", which will start a local server that watches for changes in Twill's frontend directory. You need to set "),s("code",[t._v("'dev_mode' => true")]),t._v(" in your "),s("code",[t._v("config/twill.php")]),t._v(" file when using this command. This is especially helpful for Twill's contributors, but can also be useful if you use a lot of custom components in your application.")])])]),t._v(" "),s("p",[t._v("Both commands take a "),s("code",[t._v("--noInstall")]),t._v(" option to avoid running "),s("code",[t._v("npm ci")]),t._v(" before every build.")]),t._v(" "),s("h4",{attrs:{id:"naming-convention-of-custom-vue-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#naming-convention-of-custom-vue-components"}},[t._v("#")]),t._v(" Naming convention of custom Vue components")]),t._v(" "),s("p",[t._v("The naming convention for custom blocks Vue component is deferred from the block's component name. For example, if your block's component name is "),s("code",[t._v("a17-block-quote")]),t._v(", the custom blocks should be "),s("code",[t._v("assets/js/blocks/BlockQuote.vue")]),t._v(". For component name with underscores, for example "),s("code",[t._v("a17-amazing_quote")]),t._v(", it would be "),s("code",[t._v("assets/js/blocks/BlockAmazing_quote.vue")]),t._v(".")]),t._v(" "),s("h4",{attrs:{id:"disabling-inline-blocks-templates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disabling-inline-blocks-templates"}},[t._v("#")]),t._v(" Disabling inline blocks' templates")]),t._v(" "),s("p",[t._v("It is also possible to completely disable this feature by setting the "),s("code",[t._v("twill.block_editor.inline_blocks_templates")]),t._v(" config flag to "),s("code",[t._v("false")]),t._v(".")]),t._v(" "),s("p",[t._v("If you do disable this feature, you could continue using previous versions' npm scripts, but we recommend you stop rebuilding Twill assets entirely unless you are using custom code in your generated Vue blocks. If you do keep using our npm scripts instead of our new Artisan commands, you will need to update "),s("code",[t._v("twill-build")]),t._v(" from:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  "twill-build": "rm -f public/hot && npm run twill-copy-blocks && cd vendor/area17/twill && npm ci && npm run prod && cp -R public/* ${INIT_CWD}/public",\n')])])]),s("p",[t._v("to:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  "twill-build": "npm run twill-copy-blocks && cd vendor/area17/twill && npm ci && npm run prod && cp -R dist/* ${INIT_CWD}/public",\n')])])]),s("h4",{attrs:{id:"a-bit-further-extending-twill-with-custom-components-and-custom-workflows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-bit-further-extending-twill-with-custom-components-and-custom-workflows"}},[t._v("#")]),t._v(" A bit further: extending Twill with custom components and custom workflows")]),t._v(" "),s("p",[t._v("On top of custom Vue blocks, It is possible to rebuild Twill with custom Vue components. This can be used to override Twill's own Vue components or create new form fields, for example. The "),s("code",[t._v("twill.custom_components_resource_path")]),t._v(" configuration can be used to provide a path under Laravel "),s("code",[t._v("resources")]),t._v(" folder that will be used as a source of Vue components to include in your form js build when running "),s("code",[t._v("php artisan twill:build")]),t._v(".")]),t._v(" "),s("p",[t._v("You have to run "),s("code",[t._v("php artisan twill:build")]),t._v(" for your custom Vue components to be included in the frontend build.")]),t._v(" "),s("p",[t._v("For a more in depth tutorial, check out this "),s("a",{attrs:{href:"https://spectrum.chat/twill/tips-and-tricks/adding-a-custom-block-to-twill-admin-view-with-vuejs~028d79b1-b3cd-4fb7-a89c-ce64af7be4af",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spectrum post"),s("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=a.exports}}]);